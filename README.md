# 简介  
![](https://p.gcteamo.com/images/2023/02/01/QQ20230201231957.png)
本项目是一个可以查看服务器实时情况的前端界面。采用 Material Design 风格，基于宝塔面板提供的API。（当然你也可以修改本项目，添加自己的功能）。采用 python+websocket。  

# 使用  
1. 配置宝塔面板的API  
首先在宝塔面板的“面板设置”中打开“API接口”，点击“API接口配置”。先点击“接口密钥”旁边的“重置”，然后你就可以获得一个API密钥，将其复制下来。在下方的“IP白名单”处加入“127.0.0.1”然后保存。  
2. 将本项目的仓库代码下载下来。在宝塔面板上新建一个网站，将本项目上传上去。  
3. 进行配置  
首先编辑“server.py”  
在 `config` 处可以设置监听地址和监听端口，可以不修改。  
在 `key` 处填写第一步所获得的API密钥。  
在 `url` 处填写面板的请求地址，地址不用修改，我们在内网对面板进行调用，你只需要把端口改成你的宝塔面板的按钮。  
接下来编辑“js/main.js”  
在 `MAIN_URL` 处填写接口地址。`server.py` 在运行后会启动一个websocket服务器，前端需要通过这个服务器获取信息。  
在 `part` 处填写服务器状态查询更新频率。  
在 `maxx` 处填写实时网速表格最多呈现的时间点个数。  
后两个可以不用修改。  
4. 最后一步  
在服务器上执行 `server.py`，注意放行监听的端口，可以自行设置进程守护。  
然后在浏览器上访问  
如果启动 `server.py` 报错，你可能需要安装python的websocket模块，执行 `pip install websockets` 进行安装。  

# 注意  
* 为保证安全，请不要把server.py也放到网站的目录下，以免有人获取到server.py中的信息。或者可以在网站设置中禁止对.py文件访问。  
* 本项目中流量剩余查询和服务器到期时间的接口是来自作者自己的服务器运营商，即“青云互联”，如果你的服务器也是在这里买的，可以将 `server.py` 中 `do_login` 函数的 `_data` 的内容改成你的手机号和密码。对于其他运营商的服务器，你需要自行编写对应的接口。  
* 本项目并未完全开发完毕，网页最上面的三个版块目前只想到了前两个展示什么，最后一个是空的，将来计划是将最上面的板块呈现服务器不同挂载点的信息，可以自定义其他。对于无法获得服务器剩余流量查询接口的，可以选择将第二个板块也替换成第三个空白板块，显得更美观一些（具体操作自行编辑html）。  

